-- use avII_desenvweb; -- Banco de dados utilizado na disciplina CIT7598
-- Sanvando estados das variáveis do sistema antes da criação das tabelas
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='-03:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

-- DUMP TABELAS DO BANCO

-- Excluí as tabelas caso já existam
DROP TABLE IF EXISTS `LINKS`;
DROP TABLE IF EXISTS `USER`;

-- Define o charset padrão para UTF-8 de 4 bytes
/*!40101 SET character_set_client = utf8mb4 */;

-- Criação das tabelas

CREATE TABLE IF NOT EXISTS `LINKS` (
	`idLinks` INT NOT NULL AUTO_INCREMENT,
    `order` INT UNIQUE NOT NULL,
	`name` VARCHAR(64) NOT NULL,
	`url` VARCHAR(2048) NOT NULL,
	`status` BOOLEAN NOT NULL,
	`permanentLink` BOOLEAN NOT NULL,
	`expirationDatetime` DATETIME DEFAULT NULL,
	PRIMARY KEY (`idLinks`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

LOCK TABLES `LINKS` WRITE;
/*!40000 ALTER TABLE `LINKS` DISABLE KEYS */;
INSERT INTO LINKS VALUES (1, 1, 'YouTube', 'https://www.youtube.com/channel/UC6rD7xpvC-YvUtkrP6KhyNA', 1, 1, NULL);
INSERT INTO LINKS VALUES (2, 2, 'Instagram', 'https://www.instagram.com/cursinhopes', 1, 1, NULL);
INSERT INTO LINKS VALUES (3, 3, 'Facebook', 'https://www.facebook.com/cursinhopes', 1, 1, NULL);
INSERT INTO LINKS VALUES (4, 4, 'Twitter', 'https://www.twitter.com/cursinhopes', 1, 1, NULL);
INSERT INTO LINKS VALUES (5, 5, 'LinkedIn', 'https://www.linkedin.com/company/cursinhopes', 1, 1, NULL);
INSERT INTO LINKS VALUES (6, 6, 'Formulário de contato (e-mail)', '/contato', 1, 1, NULL);
-- INSERT INTO LINKS VALUES (7, 7, 'Desativado', 'desativado', 0, 1, NULL);
-- INSERT INTO LINKS VALUES (8, 8, 'expirado', 'expirado', 1, 0, '2021/02/21 20:00:00');
-- INSERT INTO LINKS VALUES (9, 9, 'nao-expirado', 'nao-expirado', 1, 0, '2021/03/01 20:00:00');
/*!40000 ALTER TABLE `LINKS` ENABLE KEYS */;
UNLOCK TABLES;

CREATE TABLE IF NOT EXISTS `USER` (
  `idUser` INT NOT NULL AUTO_INCREMENT,
  `cpf` VARCHAR(11) NOT NULL,
  `email` VARCHAR(128) NOT NULL,
  `username` VARCHAR(32) DEFAULT NULL,
  `passwordHash` VARCHAR(256) NOT NULL,
  `type` ENUM('A', 'G', 'P', 'GP', 'CA', 'CG', 'CP') NOT NULL,
  `status` BOOLEAN NOT NULL,
  PRIMARY KEY (`idUser`),
  UNIQUE INDEX `IDX_CPF` (`cpf` ASC) VISIBLE,
  UNIQUE INDEX `IDX_EMAIL` (`email` ASC) VISIBLE,
  UNIQUE INDEX `IDX_USERNAME` (`username` ASC) INVISIBLE
  ) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

LOCK TABLES `USER` WRITE;
/*!40000 ALTER TABLE `USER` DISABLE KEYS */;
-- INSERT INTO `USER`(`ID_USER`, `CPF`, `EMAIL`, `PASSWORD_HASH`, `TYPE`, `STATUS`) VALUES(3, '11122243334', 'roger4@roger.com', 'hash', 'G', 9);
/*!40000 ALTER TABLE `USER` ENABLE KEYS */;
UNLOCK TABLES;

-- Restaura as variáveis originais do sistema
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;